{% extends 'template.html.twig' %}
{% block title %}Annonces {{ session.user }}{% endblock %}
{% block body %}
    {% include 'header.html.twig' %}
    <div class="container mb-4">
        <div class="row justify-content-center">
            {#                        {{ dump(annonces) }}#}
            {% if message %}
                <div class="col-md-10">
                    <div class="alert alert-{{type}} alert-dismissible fade show" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <strong>{{ message }}</strong>
                    </div>

                    <script>
                        $(".alert").alert();
                    </script>
                </div>
            {% endif %}
            {% if annonces %}
                {% for annonce in annonces %}
                    <div class="col-md-6">
                        <div class="card mb-3 bg-light shadow" style="max-width: 540px;">
                            <div class="row no-gutters">
                                <div class="col-md-4">
                                    <img src="../web/img/forest-4605204_640.jpg" class="card-img" alt="...">
                                </div>
                                <div class="col-md-8">
                                    <div class="card-body">
                                        <h5 class="card-title">{{ annonce.entete }}</h5>
{#                                        <p class="card-text">{{ annonce.corps }}</p>#}
                                        <p class="card-text"><small class="text-muted">Mise Ã  jour
                                                le {{ annonce.dateModif|date('d/m/Y') }}</small>
                                        </p>
                                        <p>
                                            <a id="" class="btn btn-info" href="?action=modifierAnnonce&param={{ annonce.annonceId }}" role="button">Modifier</a>
                                            <!-- Button trigger modal -->
                                            <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#exampleModalCenter">
                                                Supprimer
                                            </button>
                                        </p>

                                            <!-- Modal -->
                                        <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered" role="document">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h5 class="modal-title" id="exampleModalLongTitle">Suppression annonce</h5>
                                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                            <span aria-hidden="true">&times;</span>
                                                        </button>
                                                    </div>
                                                    <div class="modal-body">
                                                        Voulez-vous supprimer l'annonce "{{ annonce.entete }}" ?
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Annuler</button>
                                                        <a id="" class="btn btn-danger" href="?action=supprimerAnnonce&param={{ annonce.annonceId }}" role="button">Supprimer</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

{#                                            <a id="" class="btn btn-danger" href="?action=supprimerAnnonce&param={{ annonce.annonceId }}" role="button">Supprimer</a>#}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            {% endif %}

        </div>
    </div>

{% endblock %}